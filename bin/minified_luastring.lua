local a={}local b={["!"]=0,['"']=0,["#"]=0,["$"]=0,["%"]=0,["&"]=0,["'"]=0,["("]=0,[")"]=0,["*"]=0,["+"]=0,[","]=0,["-"]=0,["."]=0,["/"]=0,[":"]=0,[";"]=0,["<"]=0,["="]=0,[">"]=0,["?"]=0,["@"]=0,["["]=0,["]"]=0,["^"]=0,["_"]=0,["`"]=0,["{"]=0,["|"]=0,["}"]=0,["~"]=0,["\\"]=0}local c={["\f"]=0,["\r"]=0,[" "]=0,["\t"]=0,["\v"]=0,["\n"]=0,["\r\n"]=0}local d={["a"]=0,["b"]=0,["c"]=0,["d"]=0,["e"]=0,["f"]=0,["A"]=0,["B"]=0,["C"]=0,["D"]=0,["E"]=0,["F"]=0}local e={}local f={}local g={}local h={}local i={}local j={}local k={["true"]=true,[" true"]=true,["true "]=true,["false"]=false,[" false"]=false,["false "]=false}local l={["k"]=10^3,["m"]=10^6,["b"]=10^9,["t"]=10^12,["q"]=10^15}local m=string.rep;local n=string.sub;local o=string.char;local p=string.gsub;local q=string.find;local r=math.ceil;local s=string.lower;local t=string.upper;local tostring=tostring;local u=string.gmatch;local v=math.random;local w=string.reverse;local x=table.concat;for y,z in pairs(string)do a[y]=z end;for A=0,7 do f[A]=0;f[tostring(A)]=0 end;for A=65,90 do j[o(A)]=0 end;for A=97,122 do i[o(A)]=0 end;for A=0,9 do local B=tostring(A)e[A]=0;e[B]=0;d[A]=0;d[B]=0 end;for A=26,132 do local C=o(A)h[A]=C;h[C]=A end;function a.isdigit(D)return q(D,'^%d+$')==1 end;function a.isascii(D)return q(D,"[\128-\255]")==nil end;function a.islower(D)return q(D,"^%l+$")==1 end;function a.isalpha(D)return q(D,'^%a+$')==1 end;function a.isupper(D)return q(D,"^%u+$")==1 end;function a.isalnum(D)return q(D,'^%w+$')==1 end;function a.isidentifier(D)if tonumber(n(D,1,1))~=nil then return false elseif q(D,"[^a-zA-Z0-9_]")then return false else return true end end;function a.lfind(D,E)local F,G=q(D,E,1,true)if F then return F-1 else return nil end end;function a.rfind(D,E)D=w(D)E=w(E)return#D-(#E-q(D,E,1,true))end;function a.iswhitespace(D)return q(D,"^%s+$")==1 end;function a.count(D,E)local H,I=q(D,E,1,true)if H==nil then return 0 else local J=0;while I~=nil do H,I=q(D,E,I+1,true)J=J+1 end;return J end end;function a.nil_or_empty(D)return D==nil or D==""end;function a.contains(D,E)return q(D,E,1,true)~=nil end;function a.endswith(D,E)return n(D,#D-#E+1)==E end;function a.startswith(D,E)return n(D,1,#E)==E end;function a.sequence(D)local K={}for A=1,#D do K[A]=n(D,A,A)end;return K end;function a.split_lines(D)local K={}local L=0;for M in u(D,"[^\n\r\x80-\xFF]+")do L=L+1;K[L]=M end;return K end;function a.splitv(D,N)local K={}local L=0;for O in u(D,N)do L=L+1;K[L]=O end;return K end;function a.split(D,P)local J={}local Q=0;for E in u(D,"([^"..P.."]+)")do Q=Q+1;J[Q]=E end;return J end;function a.partition(D,P)local G,I=q(D,P,1,true)if I==nil then return D else return n(D,1,I-1),n(D,I+1)end end;function a.rpartition(D,P)local G,I=q(w(D),w(P),1,true)if I==nil then return D else local R=#D-I;return n(D,1,R),n(D,R+2)end end;function a.subsequence(D,S,T)S=S or 1;T=T or#D;local K={}local L=0;for A=S,T do local C=n(D,A,A)if C then L=L+1;K[L]=C elseif C==""then break end end;return K end;function a.title(D)local K={}local U=1;local V=0;for W in u(D,"%S+")do V=V+1;W=s(W)if W=="the"and V==1 then K[U]="The "U=U+1 elseif W=="at"and V==1 then K[U]="At "U=U+1 else if W=="of"then K[U]="of "U=U+1 elseif W=="the"then K[U]="the "U=U+1 elseif W=="at"then K[U]="at "U=U+1 else K[U]=t(n(W,1,1))..n(W,2).." "U=U+1 end end end;return x(K)end;function a.commaify(D)local X;local Y=tostring(D)while true do Y,X=p(Y,"^(-?%d+)(%d%d%d)",'%1,%2')if X==0 then break end end;return Y end;function a.tobool(D,Z)local _=k[D]or k[s(D)]if _~=nil then return _ elseif Z==true then local a0=tonumber(D)if a0==0 then return false elseif a0==1 then return true end end end;function a.casefold(a1,a2)return s(a1)==s(a2)end;function a.postfix(D,a3)local a4=s(n(D,-1))local a5=n(D,1,#D-1)local a6=tonumber(a5)local K=l[a4]if K==nil or a6==nil then return nil else if a3 then return math.floor(K*a6)else return K*a6 end end end;function a.ljustify(D,a7,L)return m(a7,L-#D)..D end;function a.rjustify(D,a7,L)return D..m(a7,L-#D)end;function a.lrjustify(D,a7,L)local a8=m(a7,r((L-#D)/2))return a8 ..D..a8 end;function a.strip(D,a9)local G,I=q(D,"[^"..a9 .."+]")D=n(D,I or#D)local aa=w(D)G,I=q(aa,"[^"..a9 .."+]")if I==nil then return D else return n(D,1,#aa-I+1)end end;function a.lstrip(D,a9)local G,I=q(D,"[^"..a9 .."+]")return n(D,I or#D)end;function a.rstrip(D,a9)local aa=w(D)local G,I=q(aa,"[^"..a9 .."+]")if I==nil then return D else return n(D,1,#aa-I+1)end end;function a.replace_first(D,ab,ac)local ad=1;local J,G=string.gsub(D,ab,function(B)if ad==1 then ad=0;return ac else return B end end)if J then D=J end;return D end;function a.ltruncate(D,ae,af)if#D>ae then if af==true then return"..."..n(D,ae-#D)else return n(D,ae-#D)end else return D end end;function a.rtruncate(D,ae,af)if#D>ae then if af==true then return n(D,1,ae).."..."else return n(D,1,ae)end else return D end end;function a.translate(D,ag)local K,G=p(D,".",ag)return K end;function a.replace_many(D,ab,ac,ah)local ad=0;local J,G=p(D,ab,function(B)if ad<ah then ad=ad+1;return ac else return B end end)if J then D=J end;return D end;function a.randomstring(ae,ai)local K={}if ai then for A=1,ae do local C=h[v(32,126)]while ai[C]~=nil do C=h[v(32,126)]end;K[A]=C end else for A=1,ae do K[A]=h[v(32,126)]end end;return x(K)end;function a.lines(D)return u(D,"[^\n\r\x80-\xFF]+")end;function a.iter_end(D)local H=#D+1;return function()H=H-1;local aj=n(D,H,H)if aj~=""then return aj end end end;function a.iter_begin(D)local H=0;return function()H=H+1;local aj=n(D,H,H)if aj~=""then return aj end end end;function a.map(D,ak,al)for A=1,#D,ak do al(n(D,A,A+ak-1))end end;function a.copy_table(am)local K={}for y,an in pairs(am)do K[y]=an end;return K end;a.ascii_punctuation=b;a.ascii_whitespace=c;a.ascii_lowercase=i;a.ascii_uppercase=j;a.ascii_printable=h;a.ascii_letters=g;a.hexdigits=d;a.octals=f;a.digits=e;return a
