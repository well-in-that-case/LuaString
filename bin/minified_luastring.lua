local a={}local b={["!"]=0,['"']=0,["#"]=0,["$"]=0,["%"]=0,["&"]=0,["'"]=0,["("]=0,[")"]=0,["*"]=0,["+"]=0,[","]=0,["-"]=0,["."]=0,["/"]=0,[":"]=0,[";"]=0,["<"]=0,["="]=0,[">"]=0,["?"]=0,["@"]=0,["["]=0,["]"]=0,["^"]=0,["_"]=0,["`"]=0,["{"]=0,["|"]=0,["}"]=0,["~"]=0,["\\"]=0}local c={["\f"]=0,["\r"]=0,[" "]=0,["\t"]=0,["\v"]=0,["\n"]=0,["\r\n"]=0}local d={["a"]=0,["b"]=0,["c"]=0,["d"]=0,["e"]=0,["f"]=0,["A"]=0,["B"]=0,["C"]=0,["D"]=0,["E"]=0,["F"]=0}local e={}local f={}local g={}local h={}local i={}local j={}local k={["true"]=true,[" true"]=true,["true "]=true,["false"]=false,[" false"]=false,["false "]=false}local l={["k"]=10^3,["m"]=10^6,["b"]=10^9,["t"]=10^12,["q"]=10^15}local m=string.rep;local n=string.sub;local o=string.char;local p=string.gsub;local q=string.find;local r=math.ceil;local s=string.lower;local t=string.upper;local tostring=tostring;local u=string.gmatch;local v=math.random;local w=string.reverse;local x=table.concat;for y,z in pairs(string)do a[y]=z end;for A=0,7 do f[A]=0;f[tostring(A)]=0 end;for A=65,90 do j[o(A)]=0 end;for A=97,122 do i[o(A)]=0 end;for A=0,9 do local B=tostring(A)e[A]=0;e[B]=0;d[A]=0;d[B]=0 end;for A=26,132 do local C=o(A)h[A]=C;h[C]=A end;function a.isdigit(D)return q(D,'^%d+$')==1 end;function a.isascii(D)return q(D,"[\128-\255]")==nil end;function a.islower(D)return q(D,"^%l+$")==1 end;function a.isalpha(D)return q(D,'^%a+$')==1 end;function a.isupper(D)return q(D,"^%u+$")==1 end;function a.isalnum(D)return q(D,'^%w+$')==1 end;function a.isidentifier(D)if tonumber(n(D,1,1))~=nil then return false elseif q(D,"[^a-zA-Z0-9_]")then return false else return true end end;function a.lfind(D,E)local F,G=q(D,E,1,true)if F then return F-1 else return nil end end;function a.rfind(D,E)D=w(D)E=w(E)return#D-(#E-q(D,E,1,true))end;function a.iswhitespace(D)return q(D,"^%s+$")==1 end;function a.count(D,E)local H,I=q(D,E,1,true)if H==nil then return 0 else local J=0;while I~=nil do H,I=q(D,E,I+1,true)J=J+1 end;return J end end;function a.nil_or_empty(D)return D==nil or D==""end;function a.contains(D,E)return q(D,E,1,true)~=nil end;function a.endswith(D,E)return n(D,#D-#E+1)==E end;function a.startswith(D,E)return n(D,1,#E)==E end;function a.sequence(D)local K={}for A=1,#D do K[A]=n(D,A,A)end;return K end;function a.split_lines(D)local K={}local L=0;for M in u(D,"[^\n\r\x80-\xFF]+")do L=L+1;K[L]=M end;return K end;function a.split(D,E)local J={}local N=0;for E in u(D,"([^"..E.."]+)")do N=N+1;J[N]=E end;return J end;function a.splitv(D,O)local K={}local L=0;for P in u(D,O)do L=L+1;K[L]=P end;return K end;function a.partition(D,E)local G,I=q(D,E,1,true)if I==nil then return D else return n(D,1,I-1),n(D,I+1)end end;function a.rpartition(D,E)local G,I=q(w(D),w(E),1,true)if I==nil then return D else local Q=#D-I;return n(D,1,Q),n(D,Q+2)end end;function a.expand(D,R)local K,G=p(D,"{(.-)}",R)return K end;function a.subsequence(D,S,T)S=S or 1;T=T or#D;local K={}local L=0;for A=S,T do local C=n(D,A,A)if C then L=L+1;K[L]=C elseif C==""then break end end;return K end;function a.between_substr(D,U,V)local W,X=q(D,U,1,true)local Y,Z=q(D,V,X,true)if X~=nil and Z~=nil then return n(D,X+1,Z-#V)end end;function a.title(D)local K={}local _=1;local a0=0;for a1 in u(D,"%S+")do a0=a0+1;a1=s(a1)if a1=="the"and a0==1 then K[_]="The "_=_+1 elseif a1=="at"and a0==1 then K[_]="At "_=_+1 else if a1=="of"then K[_]="of "_=_+1 elseif a1=="the"then K[_]="the "_=_+1 elseif a1=="at"then K[_]="at "_=_+1 else K[_]=t(n(a1,1,1))..n(a1,2).." "_=_+1 end end end;return x(K)end;function a.tobool(D,a2)local a3=k[D]or k[s(D)]if a3~=nil then return a3 elseif a2==true then local a4=tonumber(D)if a4==0 then return false elseif a4==1 then return true end end end;function a.casefold(a5,a6)return s(a5)==s(a6)end;function a.postfix(D,a7)local a8=s(n(D,-1))local a9=n(D,1,#D-1)local aa=tonumber(a9)local K=l[a8]if K==nil or aa==nil then return nil else if a7 then return math.floor(K*aa)else return K*aa end end end;function a.format_num(ab)local ac;local ad=tostring(ab)while true do ad,ac=p(ad,"^(-?%d+)(%d%d%d)",'%1,%2')if ac==0 then break end end;return ad end;function a.ljustify(D,ae,L)return m(ae,L-#D)..D end;function a.rjustify(D,ae,L)return D..m(ae,L-#D)end;function a.lrjustify(D,ae,L)local af=m(ae,r((L-#D)/2))return af..D..af end;function a.strip(D,ag)local G,I=q(D,"[^"..ag.."+]")D=n(D,I or#D)local ah=w(D)G,I=q(ah,"[^"..ag.."+]")if I==nil then return D else return n(D,1,#ah-I+1)end end;function a.lstrip(D,ag)local G,I=q(D,"[^"..ag.."+]")return n(D,I or#D)end;function a.rstrip(D,ag)local ah=w(D)local G,I=q(ah,"[^"..ag.."+]")if I==nil then return D else return n(D,1,#ah-I+1)end end;function a.replace_first(D,ai,aj)local ak=1;local J,G=string.gsub(D,ai,function(B)if ak==1 then ak=0;return aj else return B end end)if J then D=J end;return D end;function a.ltruncate(D,al,am)if#D>al then if am==true then return"..."..n(D,al-#D)else return n(D,al-#D)end else return D end end;function a.rtruncate(D,al,am)if#D>al then if am==true then return n(D,1,al).."..."else return n(D,1,al)end else return D end end;function a.translate(D,an)local K,G=p(D,".",an)return K end;function a.replace_many(D,ai,aj,ao)local ak=0;local J,G=p(D,ai,function(B)if ak<ao then ak=ak+1;return aj else return B end end)if J then D=J end;return D end;function a.randomstring(al,ap)local K={}if ap then for A=1,al do local C=h[v(32,126)]while ap[C]~=nil do C=h[v(32,126)]end;K[A]=C end else for A=1,al do K[A]=h[v(32,126)]end end;return x(K)end;function a.lines(D)return u(D,"[^\n\r]+")end;function a.iter_end(D)local H=#D+1;return function()H=H-1;local aq=n(D,H,H)if aq~=""then return aq end end end;function a.iter_begin(D)local H=0;return function()H=H+1;local aq=n(D,H,H)if aq~=""then return aq end end end;function a.map(D,ar,as)for A=1,#D,ar do as(n(D,A,A+ar-1))end end;function a.copy_table(at)local K={}for y,au in pairs(at)do K[y]=au end;return K end;function a.merge_table(at,av)local K={}for y,au in pairs(at)do K[y]=au end;for y,au in pairs(av)do K[y]=au end;return K end;a.ascii_punctuation=b;a.ascii_whitespace=c;a.ascii_lowercase=i;a.ascii_uppercase=j;a.ascii_printable=h;a.ascii_letters=g;a.hexdigits=d;a.octals=f;a.digits=e;return a
